<!-- FINANCIAL PAGE -->
        <div id="financial" class="page">
            <div class="page-header">
                <h2 class="page-title">
                    <i class="fas fa-dollar-sign"></i> Gestão Financeira
                </h2>
            </div>

            <div class="tab-container">
                <div class="tab-nav">
                    <button class="tab-btn active" onclick="showTab('financial-overview', this)">
                        <i class="fas fa-chart-line"></i> Visão Geral
                    </button>
                    <button class="tab-btn" onclick="showTab('financial-expenses', this)">
                        <i class="fas fa-receipt"></i> Nova Despesa
                    </button>
                    <button class="tab-btn" onclick="showTab('financial-revenues', this)">
                        <i class="fas fa-plus-circle"></i> Nova Receita
                    </button>
                    <button class="tab-btn" onclick="showTab('financial-goals', this)">
                        <i class="fas fa-bullseye"></i> Metas
                    </button>
                    <button class="tab-btn" onclick="showTab('financial-flow', this)">
                        <i class="fas fa-exchange-alt"></i> Fluxo de Caixa
                    </button>
                </div>

                <div id="financial-overview" class="tab-content active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon primary">
                                    <i class="fas fa-arrow-up"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="financial-revenue">R$ 0,00</div>
                            <div class="stat-label">Receita Mensal</div>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span id="revenue-growth">+0%</span> vs mês anterior
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon danger">
                                    <i class="fas fa-arrow-down"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="financial-expenses">R$ 0,00</div>
                            <div class="stat-label">Despesas Mensais</div>
                            <div class="stat-change negative">
                                <i class="fas fa-arrow-down"></i>
                                <span id="expenses-growth">-0%</span> vs mês anterior
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon secondary">
                                    <i class="fas fa-piggy-bank"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="financial-profit">R$ 0,00</div>
                            <div class="stat-label">Lucro Líquido</div>
                            <div class="stat-change positive">
                                <span id="profit-margin">0%</span> de margem
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon accent">
                                    <i class="fas fa-wallet"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="financial-balance">R$ 0,00</div>
                            <div class="stat-label">Saldo Projetado</div>
                            <div class="stat-change neutral">
                                Para o próximo mês
                            </div>
                        </div>
                    </div>
                </div>

                <div id="financial-expenses" class="tab-content">
                    <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 12px; margin-bottom: 20px; color: #155724;">
                        <strong>Notas baixadas da Receita!</strong>
                    </div>

                    <div style="background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 24px;">
                        <h3 style="margin-bottom: 24px; color: #495057; font-size: 24px; font-weight: 600;">Nova despesa</h3>
                        
                        <form id="expenseForm">
                            <div style="margin-bottom: 24px;">
                                <h4 style="margin-bottom: 16px; color: #6c757d; font-size: 16px; font-weight: 600;">Informações do lançamento</h4>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin-bottom: 24px;">
                                    <div>
                                        <label style="display: flex; align-items: center; margin-bottom: 8px; color: #495057; font-weight: 500;">
                                            <input type="checkbox" style="margin-right: 8px;" name="habilitarRateioReceita">
                                            Habilitar rateio
                                        </label>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Categoria <span style="color: #dc3545;">*</span></label>
                                        <select class="form-select" name="categoriaReceita" required style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="">Selecione...</option>
                                            <option value="Frete">Frete</option>
                                            <option value="Prestação de Serviços">Prestação de Serviços</option>
                                            <option value="Outros">Outros</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Centro de custo</label>
                                        <select class="form-select" name="centroCustoReceita" style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="">Selecione...</option>
                                            <option value="Operacional">Operacional</option>
                                            <option value="Administrativo">Administrativo</option>
                                            <option value="Comercial">Comercial</option>
                                        </select>
                                    </div>
                                </div>

                                <div style="margin-bottom: 24px;">
                                    <label style="display: flex; align-items: center; margin-bottom: 16px; color: #495057; font-weight: 500;">
                                        <input type="checkbox" style="margin-right: 8px;" name="repetirLancamentoReceita" id="repetirLancamentoReceita" onchange="toggleRepetitionRevenue()">
                                        Repetir lançamento?
                                    </label>
                                    
                                    <div id="repetitionConfigRevenue" style="display: none;">
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Configurações de repetição <span style="color: #dc3545;">*</span></label>
                                        <select class="form-select" name="configRepetitionReceita" style="width: 100%; max-width: 400px; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="semanal">Semanal: A cada 1 semana(s), 48 vez(es)</option>
                                            <option value="mensal">Mensal: A cada 1 mês(es), 12 vez(es)</option>
                                            <option value="anual">Anual: A cada 1 ano(s), 1 vez(es)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div style="margin-bottom: 24px;">
                                <h4 style="margin-bottom: 16px; color: #6c757d; font-size: 16px; font-weight: 600;">Condição de recebimento</h4>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 16px; align-items: end;">
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Receber sempre no</label>
                                        <select class="form-select" name="receberSempre" style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="segunda">Segunda-feira</option>
                                            <option value="terca">Terça-feira</option>
                                            <option value="quarta">Quarta-feira</option>
                                            <option value="quinta">Quinta-feira</option>
                                            <option value="sexta">Sexta-feira</option>
                                            <option value="sabado">Sábado</option>
                                            <option value="domingo">Domingo</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">1º vencimento <span style="color: #dc3545;">*</span></label>
                                        <input type="date" class="form-input" name="primeiroVencimentoReceita" required style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px;">
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Forma de recebimento</label>
                                        <select class="form-select" name="formaRecebimento" style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="">Selecione...</option>
                                            <option value="dinheiro">Dinheiro</option>
                                            <option value="pix">PIX</option>
                                            <option value="cartao">Cartão</option>
                                            <option value="transferencia">Transferência</option>
                                            <option value="boleto">Boleto</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Conta de recebimento</label>
                                        <select class="form-select" name="contaRecebimento" style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="conta-corrente">CONTA CORRENTE</option>
                                            <option value="poupanca">POUPANÇA</option>
                                            <option value="caixa">CAIXA</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div style="border-top: 1px solid #dee2e6; margin-top: 24px; padding-top: 24px;">
                                <div style="display: flex; gap: 16px;">
                                    <button type="button" class="btn btn-outline" onclick="document.getElementById('revenueForm').reset(); toggleRepetitionRevenue();" style="padding: 12px 24px; border: 1px solid #6c757d; background: white; color: #6c757d; border-radius: 6px; cursor: pointer;">
                                        Voltar
                                    </button>
                                    <button type="submit" style="padding: 12px 24px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
                                        <i class="fas fa-save"></i> Salvar
                                        <i class="fas fa-chevron-down" style="margin-left: 8px; font-size: 12px;"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="card" style="margin-top: 2rem;">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-list"></i> Receitas Registradas
                            </h3>
                        </div>
                        <div class="card-body">
                            <div id="revenuesList">
                                <div class="empty-state">
                                    <i class="fas fa-plus-circle"></i>
                                    <h3>Nenhuma receita registrada</h3>
                                    <p>Registre suas receitas para ter controle total dos ganhos</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="financial-goals" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-bullseye"></i> Definir Metas
                            </h3>
                        </div>
                        <div class="card-body">
                            <form id="goalsForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Meta de Receita Mensal (R$)</label>
                                        <input type="number" class="form-input" name="metaReceita" placeholder="0.00" step="0.01">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Meta de Viagens/Mês</label>
                                        <input type="number" class="form-input" name="metaViagens" placeholder="0">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Meta de Margem de Lucro (%)</label>
                                        <input type="number" class="form-input" name="metaMargem" placeholder="15" value="15">
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-accent">
                                    <i class="fas fa-save"></i> Salvar Metas
                                </button>
                            </form>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon primary">
                                    <i class="fas fa-target"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="goal-revenue-progress">0%</div>
                            <div class="stat-label">Meta de Receita</div>
                            <div class="stat-change neutral">
                                <span id="goal-revenue-status">R$ 0 / R$ 0</span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon secondary">
                                    <i class="fas fa-truck"></i>
                                </div>
                            </div>
                            <div class="stat-value" id="goal-trips-progress">0%</div>
                            <div class="stat-label">Meta de Viagens</div>
                            <div class="stat-change neutral">
                                <span id="goal-trips-status">0 / 0 viagens</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="financial-flow" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-chart-line"></i> Projeção de Fluxo de Caixa
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="cashFlowChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> 2fr 1fr 2fr; gap: 16px; margin-bottom: 24px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Fornecedor</label>
                                        <select class="form-select" name="fornecedor" style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="">Selecione...</option>
                                            <option value="Posto ABC">Posto ABC</option>
                                            <option value="Oficina XYZ">Oficina XYZ</option>
                                            <option value="Seguradora">Seguradora</option>
                                            <option value="Outros">Outros</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Data de competência <span style="color: #dc3545;">*</span></label>
                                        <input type="date" class="form-input" name="dataCompetencia" required style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px;">
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Descrição <span style="color: #dc3545;">*</span></label>
                                        <input type="text" class="form-input" name="descricao" placeholder="" required style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px;">
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Valor <span style="color: #dc3545;">*</span></label>
                                        <div style="position: relative;">
                                            <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6c757d; background: #f8f9fa; padding: 0 6px; border-radius: 4px; font-size: 14px;">R$</span>
                                            <input type="number" class="form-input" name="valor" placeholder="0,00" step="0.01" required style="width: 100%; padding: 12px 12px 12px 50px; border: 1px solid #ced4da; border-radius: 6px;">
                                        </div>
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin-bottom: 24px;">
                                    <div>
                                        <label style="display: flex; align-items: center; margin-bottom: 8px; color: #495057; font-weight: 500;">
                                            <input type="checkbox" style="margin-right: 8px;" name="habilitarRateio">
                                            Habilitar rateio
                                        </label>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Categoria <span style="color: #dc3545;">*</span></label>
                                        <select class="form-select" name="categoria" required style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="">Selecione...</option>
                                            <option value="Combustível">Combustível</option>
                                            <option value="Manutenção">Manutenção</option>
                                            <option value="Seguro">Seguro</option>
                                            <option value="IPVA">IPVA</option>
                                            <option value="Financiamento">Financiamento</option>
                                            <option value="Outros">Outros</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Centro de custo</label>
                                        <select class="form-select" name="centroCusto" style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="">Selecione...</option>
                                            <option value="Operacional">Operacional</option>
                                            <option value="Administrativo">Administrativo</option>
                                            <option value="Comercial">Comercial</option>
                                        </select>
                                    </div>
                                </div>

                                <div style="margin-bottom: 24px;">
                                    <label style="display: flex; align-items: center; margin-bottom: 16px; color: #495057; font-weight: 500;">
                                        <input type="checkbox" style="margin-right: 8px;" name="repetirLancamento" id="repetirLancamento" onchange="toggleRepetition()">
                                        Repetir lançamento?
                                    </label>
                                    
                                    <div id="repetitionConfig" style="display: none;">
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Configurações de repetição <span style="color: #dc3545;">*</span></label>
                                        <select class="form-select" name="configRepetition" style="width: 100%; max-width: 400px; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="semanal">Semanal: A cada 1 semana(s), 48 vez(es)</option>
                                            <option value="mensal">Mensal: A cada 1 mês(es), 12 vez(es)</option>
                                            <option value="anual">Anual: A cada 1 ano(s), 1 vez(es)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div style="margin-bottom: 24px;">
                                <h4 style="margin-bottom: 16px; color: #6c757d; font-size: 16px; font-weight: 600;">Condição de pagamento</h4>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 16px; align-items: end;">
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Cobrar sempre no</label>
                                        <select class="form-select" name="cobrarSempre" style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="segunda">Segunda-feira</option>
                                            <option value="terca">Terça-feira</option>
                                            <option value="quarta">Quarta-feira</option>
                                            <option value="quinta">Quinta-feira</option>
                                            <option value="sexta">Sexta-feira</option>
                                            <option value="sabado">Sábado</option>
                                            <option value="domingo">Domingo</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">1º vencimento <span style="color: #dc3545;">*</span></label>
                                        <input type="date" class="form-input" name="primeiroVencimento" required style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px;">
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Forma de pagamento</label>
                                        <select class="form-select" name="formaPagamento" style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="">Selecione...</option>
                                            <option value="dinheiro">Dinheiro</option>
                                            <option value="pix">PIX</option>
                                            <option value="cartao">Cartão</option>
                                            <option value="transferencia">Transferência</option>
                                            <option value="boleto">Boleto</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Conta de pagamento</label>
                                        <select class="form-select" name="contaPagamento" style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="conta-corrente">CONTA CORRENTE</option>
                                            <option value="poupanca">POUPANÇA</option>
                                            <option value="caixa">CAIXA</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div style="border-top: 1px solid #dee2e6; margin-top: 24px; padding-top: 24px;">
                                <div style="display: flex; gap: 16px;">
                                    <button type="button" class="btn btn-outline" onclick="document.getElementById('expenseForm').reset(); toggleRepetition();" style="padding: 12px 24px; border: 1px solid #6c757d; background: white; color: #6c757d; border-radius: 6px; cursor: pointer;">
                                        Voltar
                                    </button>
                                    <button type="submit" style="padding: 12px 24px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
                                        <i class="fas fa-save"></i> Salvar
                                        <i class="fas fa-chevron-down" style="margin-left: 8px; font-size: 12px;"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="card" style="margin-top: 2rem;">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-list"></i> Despesas Registradas
                            </h3>
                        </div>
                        <div class="card-body">
                            <div id="expensesList">
                                <div class="empty-state">
                                    <i class="fas fa-receipt"></i>
                                    <h3>Nenhuma despesa registrada</h3>
                                    <p>Registre suas despesas para ter controle total dos custos</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="financial-revenues" class="tab-content">
                    <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 12px; margin-bottom: 20px; color: #155724;">
                        <strong>Notas baixadas da Receita!</strong>
                    </div>

                    <div style="background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 24px;">
                        <h3 style="margin-bottom: 24px; color: #495057; font-size: 24px; font-weight: 600;">Nova receita</h3>
                        
                        <form id="revenueForm">
                            <div style="margin-bottom: 24px;">
                                <h4 style="margin-bottom: 16px; color: #6c757d; font-size: 16px; font-weight: 600;">Informações do lançamento</h4>
                                
                                <div style="display: grid; grid-template-columns: 1fr 2fr 1fr 2fr; gap: 16px; margin-bottom: 24px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Cliente</label>
                                        <select class="form-select" name="clienteReceita" style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; background: white;">
                                            <option value="">Selecione...</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Data de competência <span style="color: #dc3545;">*</span></label>
                                        <input type="date" class="form-input" name="dataCompetenciaReceita" required style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px;">
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Descrição <span style="color: #dc3545;">*</span></label>
                                        <input type="text" class="form-input" name="descricaoReceita" placeholder="" required style="width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px;">
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; color: #495057; font-weight: 500;">Valor <span style="color: #dc3545;">*</span></label>
                                        <div style="position: relative;">
                                            <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6c757d; background: #f8f9fa; padding: 0 6px; border-radius: 4px; font-size: 14px;">R$</span>
                                            <input type="number" class="form-input" name="valorReceita" placeholder="0,00" step="0.01" required style="width: 100%; padding: 12px 12px 12px 50px; border: 1px solid #ced4da; border-radius: 6px;">
                                        </div>
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: 1fr
